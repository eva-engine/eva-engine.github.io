<!doctype html>
<html class="docs-version-current" lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">æ’ä»¶å¼€å‘ | Eva.js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://eva.js.org/zh-cn/docs/tutorials/pluginDevelop"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="æ’ä»¶å¼€å‘ | Eva.js"><meta data-react-helmet="true" name="description" content="ä¸€èˆ¬é€šè¿‡è„šæœ¬ç»„ä»¶çš„æ–¹å¼å°±å¯ä»¥å®ç°å¤§éƒ¨åˆ†é€»è¾‘ï¼Œæ¶‰åŠå¼•æ“çº§åˆ«æˆ–è€…ä¸šåŠ¡çº§åˆ«çš„é€šç”¨èƒ½åŠ›ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶çš„å½¢å¼è¿›è¡Œå¼€å‘ï¼Œæ’ä»¶ä¸»è¦æ˜¯ç”± Component å’Œ System ç»„æˆã€‚"><meta data-react-helmet="true" property="og:description" content="ä¸€èˆ¬é€šè¿‡è„šæœ¬ç»„ä»¶çš„æ–¹å¼å°±å¯ä»¥å®ç°å¤§éƒ¨åˆ†é€»è¾‘ï¼Œæ¶‰åŠå¼•æ“çº§åˆ«æˆ–è€…ä¸šåŠ¡çº§åˆ«çš„é€šç”¨èƒ½åŠ›ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶çš„å½¢å¼è¿›è¡Œå¼€å‘ï¼Œæ’ä»¶ä¸»è¦æ˜¯ç”± Component å’Œ System ç»„æˆã€‚"><link data-react-helmet="true" rel="shortcut icon" href="/zh-cn/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://eva.js.org/zh-cn/docs/tutorials/pluginDevelop"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/pluginDevelop" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/zh-cn/docs/tutorials/pluginDevelop" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://eva.js.org/docs/tutorials/pluginDevelop" hreflang="x-default"><link rel="stylesheet" href="/zh-cn/assets/css/styles.3c723cb4.css">
<link rel="preload" href="/zh-cn/assets/js/runtime~main.ae83285c.js" as="script">
<link rel="preload" href="/zh-cn/assets/js/main.2e9ad81b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-cn/"><div class="navbar__logo"><img src="/zh-cn/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/zh-cn/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Eva.js</b></a><a class="navbar__item navbar__link navbar__link--active" href="/zh-cn/docs/tutorials/quickstart">æ•™ç¨‹</a><a class="navbar__item navbar__link" href="/zh-cn/docs/api/index">API</a><a href="https://eva.js.org/playground" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Demos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.yuque.com/eva/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>åšå®¢<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>å¸¸è§é—®é¢˜<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eva-engine/eva.js" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">English</a><ul class="dropdown__menu"><li><a href="https://eva.js.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>English<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://eva-engine.github.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>ä¸­æ–‡ï¼ˆä¸­å›½ï¼‰<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-cn/docs/tutorials/quickstart">å¿«é€Ÿå¼€å§‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/eva-engine/eva.js/issues/140" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Q&amp;A<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Basic</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/resourceManagement">èµ„æºç®¡ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/game">æ¸¸æˆ Game</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/gameObject">æ¸¸æˆå¯¹è±¡ GameObject</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/transformComponent">Transform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/compressedTexture">çº¹ç†å‹ç¼©æ ¼å¼çš„ä½¿ç”¨</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Graphics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/prepareRender">å‡†å¤‡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/imageComponent">å›¾ç‰‡ Image</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/textComponent">æ–‡æœ¬ Text</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/graphicsComponent">å›¾å½¢ Graphics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/spriteComponent">ç²¾çµå›¾ Sprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/maskComponent">é®ç½© Mask</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/ninePatchComponent">ä¹å®«æ ¼ NinePatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/tilingSpriteComponent">å¹³é“ºç²¾çµ TilingSprite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/orderAndTransparent">é®æŒ¡æ’åºä¸é€æ˜åº¦</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Animation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/transitionAnimation">è¿‡æ¸¡åŠ¨ç”»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/spriteAnimation">å¸§åŠ¨ç”»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/spineAnimation">Spine éª¨éª¼åŠ¨ç”»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/dragonboneAnimation">Dragonbones é¾™éª¨åŠ¨ç”»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/lottieAnimation">Lottie åŠ¨ç”»</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/interactionEvent">äº¤äº’äº‹ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/customComponent">è„šæœ¬ç»„ä»¶</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Plugin</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/sound">Sound éŸ³é¢‘ç³»ç»Ÿ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/matterJS">MatterJS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/a11yPlugin">A11y æ— éšœç¢æ’ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/evaxPlugin">æ•°æ®ç®¡ç†</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-cn/docs/tutorials/performancePlugin">æ€§èƒ½ç›‘æ§</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-cn/docs/tutorials/pluginDevelop">æ’ä»¶å¼€å‘</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="æ’ä»¶å¼€å‘">æ’ä»¶å¼€å‘</h1><p>ä¸€èˆ¬é€šè¿‡è„šæœ¬ç»„ä»¶çš„æ–¹å¼å°±å¯ä»¥å®ç°å¤§éƒ¨åˆ†é€»è¾‘ï¼Œæ¶‰åŠå¼•æ“çº§åˆ«æˆ–è€…ä¸šåŠ¡çº§åˆ«çš„é€šç”¨èƒ½åŠ›ï¼Œå¯ä»¥ä½¿ç”¨æ’ä»¶çš„å½¢å¼è¿›è¡Œå¼€å‘ï¼Œæ’ä»¶ä¸»è¦æ˜¯ç”± Component å’Œ System ç»„æˆã€‚</p><p>Eva.js çš„æ¸²æŸ“æ˜¯åŸºäº <a href="http://pixijs.io/">PixiJS</a> çš„ï¼Œä¸€èˆ¬ Img/Sprite/Spine ç­‰æ’ä»¶å®é™…ä¸Šæ˜¯åˆ›å»ºäº† Pixi çš„æ¸²æŸ“å¯¹è±¡ï¼Œåƒ Stats/EvaX/Transition ç­‰æ’ä»¶ä¸ä¾èµ– Pixiã€‚ä¸ç®¡æ˜¯å“ªç§æ’ä»¶éƒ½æ˜¯è¾“å‡º Component å’Œ System ç»™å¼•æ“ä½¿ç”¨ï¼Œä½†æ˜¯å¼€å‘æ–¹æ¡ˆæœ‰ä¸€äº›ä¸åŒï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šå…ˆè®²è§£æœ€ç®€å•çš„æ’ä»¶å¼€å‘æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª<a href="https://github.com/eva-engine/plugin-template">æ’ä»¶æ¨¡æ¿</a>ï¼Œå¯ä»¥ç‚¹å‡» <code>Use this Template</code> ç›´æ¥ä½¿ç”¨æ¨¡ç‰ˆè¿›è¡Œå¼€å‘ï¼Œé‡Œé¢å¸¦äº†å¿…è¦çš„è„šæ‰‹æ¶ã€‚</p><h2 id="åŸºç¡€">åŸºç¡€</h2><h3 id="å¼€å‘">å¼€å‘</h3><p>è¯»åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹ Eva.js æœ‰æ‰€äº†è§£å¹¶ä¸”çŸ¥é“å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ’ä»¶çš„ç®€å•çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><pre><code class="language-js">import { Demo, DemoSystem } from &#x27;./tutorials/lib&#x27;
const game = new Game({
  systems: [new DemoSystem()]
})
const go = new GameObject()
go.addComponent(new Demo())
game.scene.addChild(go)
</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ’ä»¶æ˜¯ç”± Component å’Œ System ç»„æˆçš„ï¼Œå¹¶ä¸”ä¸€ä¸ªæ’ä»¶ä¸­ä¸ä¸€å®šåªåŒ…å«ä¸€ä¸ª Componentã€‚</p><p>æ‰€ä»¥ï¼Œå¼€å‘æ’ä»¶éœ€è¦å®ç°æš´éœ²ç»™ç”¨æˆ·ä½¿ç”¨çš„ Component å’Œ Systemã€‚</p><h3 id="æ’ä»¶è¿è¡Œé€»è¾‘">æ’ä»¶è¿è¡Œé€»è¾‘</h3><p>ç»„ä»¶ï¼ˆComponentï¼‰å¯ä»¥èµ‹äºˆæ¸¸æˆå¯¹è±¡èƒ½åŠ›ï¼Œæˆ‘ä»¬å°†ä¸€äº›é…ç½®å’Œå±æ€§è®°å½•åœ¨ç»„ä»¶ä¸Šã€‚
ç³»ç»Ÿï¼ˆSystemï¼‰ç”¨æ¥è¯»å–ç»„ä»¶ä¸Šé¢çš„æ•°æ®ï¼Œå®ç°ç»„ä»¶å¯¹åº”çš„èƒ½åŠ›ã€‚</p><p>å½“ç³»ç»Ÿè¢«æ·»åŠ åˆ°æ¸¸æˆå®ä¾‹ä¸Šåï¼Œç³»ç»Ÿåœ¨å®ƒæ‰€éœ€å…³å¿ƒçš„ç»„ä»¶åœ¨æ·»åŠ ã€ç§»é™¤ã€å±æ€§å˜åŒ–æ—¶ï¼Œåšä¸€ç³»åˆ—å¯¹åº”çš„æ“ä½œï¼Œå³å¯å®ç°ä¸€äº›åŠŸèƒ½ã€‚</p><p>ä¾‹å¦‚åœ¨ Img æ’ä»¶ä¸­ï¼Œå½“ Img è¢«æ·»åŠ åˆ°æ¸¸æˆå¯¹è±¡ä¸Šæ—¶ï¼ŒSystem å†…ä¼šåˆ›å»ºä¸€ä¸ª Pixi çš„ Sprite å¯¹è±¡ï¼ŒæŒ‚è½½åˆ° GameObject å¯¹åº”çš„ Pixi Containerä¸Šï¼Œå½“ Img ç»„ä»¶çš„ resource å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒSystem ä¼šå»ä¿®æ”¹å¯¹åº” Sprite ä¸Šé¢çš„ textureã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šè®²è§£å¦‚ä½•è®¾è®¡ä¸€ä¸ªç»„ä»¶ï¼Œä»¥åŠ System æ˜¯å¦‚ä½•ç›‘å¬ç»„ä»¶å˜åŒ–çš„ã€‚</p><h3 id="æ„å»ºä¸å‘å¸ƒè§„èŒƒ">æ„å»ºä¸å‘å¸ƒè§„èŒƒ</h3><h2 id="å¼€å‘å®è·µ">å¼€å‘å®è·µ</h2><p>ä¸‹é¢ä»¥ <a href="a11yPlugin">@eva/plugin-a11y</a> æ’ä»¶ä¸ºä¾‹ï¼Œå¯¹ Eva.js æ’ä»¶å¼€å‘åšä¸€ä¸ªè¯¦ç»†çš„ä»‹ç»ã€‚</p><blockquote><p>@eva/plugin-a11y ç”¨äºä¸ºæ¸¸æˆå¯¹è±¡æ·»åŠ æ— éšœç¢çš„èƒ½åŠ›ã€‚åœ¨ DOM å¼€å‘ä¸­ï¼Œæ— éšœç¢é˜…è¯»å™¨æ˜¯å¯ä»¥é˜…è¯»åˆ° HTML å…ƒç´ å†…å®¹çš„ï¼Œç›®å‰åœ¨ Canvas é‡Œçš„ç»˜åˆ¶å…ƒç´ æ— æ³•å®ç°æ— éšœç¢åŒ–çš„èƒ½åŠ›ï¼Œ@eva/plugin-a11y æ’ä»¶é€šè¿‡å®šä½æ¸¸æˆå¯¹è±¡çš„ä½ç½®ï¼Œè‡ªåŠ¨åŒ–åœ°æ·»åŠ è¾…åŠ© DOMï¼Œä½¿å¾—æ¸¸æˆå¯¹è±¡èƒ½è¢«æ— éšœç¢é˜…è¯»å™¨èšç„¦ï¼Œè®©æ¸¸æˆæ‹¥æœ‰æ— éšœç¢åŠŸèƒ½ã€‚</p></blockquote><p>é¦–å…ˆè®¾è®¡ Componentï¼Œæ—¢éœ€è¦èµ‹äºˆæ¸¸æˆå¯¹è±¡çš„èƒ½åŠ›ã€‚</p><h3 id="ä½¿ç”¨æ¡ˆä¾‹">ä½¿ç”¨æ¡ˆä¾‹</h3><pre><code class="language-js">import { A11y, A11ySystem } from &#x27;@eva/plugin-a11y&#x27;

const game = new Game({
  systems: [new A11ySystem()]
})

const go = new GameObject()

go.addComponent(new A11y({
  hint: &#x27;æ‰€éœ€æœ—è¯»çš„å†…å®¹&#x27;
}))

game.scene.addChild(go)

</code></pre><h3 id="component-è®¾è®¡">Component è®¾è®¡</h3><ul><li>ç¡®å®šç»„ä»¶åç§°: <code>A11y</code> </li><li>è®¾è®¡ç»„ä»¶å‚æ•°:<ul><li>hint éœ€è¦æœ—è¯»çš„å†…å®¹</li></ul></li></ul><pre><code class="language-js">import { Component } from &#x27;@eva/eva.js&#x27;
export default class A11y extends Component {
  static componentName: string = &#x27;A11y&#x27; // è¿™é‡Œæ˜¯Componentçš„åç§°ï¼Œç”¨äº System ç›‘å¬å˜åŒ–

  /**
   * æ— éšœç¢æ ‡ç­¾æœ—è¯»å†…å®¹
   */
  public hint: string

  /**
   * åˆå§‹åŒ–æ–¹æ³•ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°ä¼šä¼ é€’åˆ°è¿™é‡Œ
   */
  init(param = {hint: &#x27;&#x27;}) {
    const { hint } = param
    this.hint = hint
  }
}
</code></pre><h3 id="system-è®¾è®¡">System è®¾è®¡</h3><ul><li>ç¡®å®šè¦ç›‘å¬çš„ç»„ä»¶ï¼Œä»¥åŠéœ€è¦ç›‘å¬å“ªäº›å‚æ•°çš„å˜åŒ–</li><li>ç¡®å®šç³»ç»Ÿåå­—</li><li>æ ¹æ®ç»„ä»¶å˜åŒ–å®ç°é€»è¾‘</li></ul><h4 id="step1-ç¡®å®šè¦ç›‘å¬çš„ç»„ä»¶ä»¥åŠå‚æ•°">Step1 ç¡®å®šè¦ç›‘å¬çš„ç»„ä»¶ä»¥åŠå‚æ•°</h4><pre><code class="language-js">import { System, decorators } from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // ç›‘å¬ A11y ç»„ä»¶çš„ hint å±æ€§å˜åŒ–
})
class A11ySystem extends System {

}
</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†éœ€è¦ç›‘å¬å˜åŒ–çš„ç»„ä»¶åç§°å’Œç›‘å¬å±æ€§ä¼ å…¥ <code>@decorators.componentObserver</code> ä¸­ï¼Œä»¥ä¾¿åˆ›å»ºç›‘å¬ã€‚</p><p>å¦‚æœåªéœ€è¦ç›‘å¬ç»„ä»¶æ·»åŠ ç§»é™¤å¯ä»¥ä¸å¡«å†™å…·ä½“çš„å±æ€§ï¼Œä¾‹å¦‚</p><pre><code class="language-js">@decorators.componentObserver({
  A11y: [] // ç›‘å¬ A11y ç»„ä»¶çš„ hint å±æ€§å˜åŒ–
})
</code></pre><p>å¦‚æœç›‘å¬çš„å±æ€§ä¸æ˜¯ç›´æ¥æŒ‚è½½åˆ°ç»„ä»¶å¯¹è±¡ä¸Šçš„ï¼Œè¿˜æœ‰ä¸€çº§åµŒå¥—</p><p>ä¾‹å¦‚ç›‘å¬ç»„ä»¶ A çš„ style å±æ€§ä¸‹çš„ size å±æ€§</p><p>å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;, &#x27;size&#x27;]
  }]
})
</code></pre><p>å¦‚æœæƒ³è¦æ·±åº¦ç›‘å¬ style å±æ€§ï¼Œå¯ä»¥è¿™æ ·å†™</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;],
    deep: true
  }]
})
</code></pre><p>å¦‚æœæƒ³ç›‘å¬å¤šä¸ªç»„ä»¶å˜åŒ–ï¼Œå¯ä»¥è¿™æ ·å†™</p><pre><code class="language-js">@decorators.componentObserver({
  A: [{
    prop: [&#x27;style&#x27;],
    deep: true
  }]
  B: [&#x27;props&#x27;]
})
</code></pre><h4 id="step2-è®¾ç½®ç³»ç»Ÿåå­—">Step2 è®¾ç½®ç³»ç»Ÿåå­—</h4><p>ç»™ System è®¾ç½®åå­—</p><pre><code class="language-js">import { System, decorators } from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // ç›‘å¬ A11y ç»„ä»¶çš„ hint å±æ€§å˜åŒ–
})
class A11ySystem extends System {
  static systemName = &#x27;A11ySystem&#x27;;
}
</code></pre><h4 id="step3-æ ¹æ®ç»„ä»¶å˜åŒ–å®ç°é€»è¾‘">Step3 æ ¹æ®ç»„ä»¶å˜åŒ–å®ç°é€»è¾‘</h4><p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬åšäº†ä¸€äº›ç›‘å¬é…ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‹¿åˆ°å¯¹åº”çš„å˜åŒ–å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ System æœ‰ <code>update</code> ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬åœ¨ç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥è·å–åˆ°å½“å‰å¸§ Component çš„å˜åŒ–ã€‚</p><pre><code class="language-js">import { System, decorators, ComponentChanged } from &#x27;@eva/eva.js&#x27;

@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // ç›‘å¬ A11y ç»„ä»¶çš„ hint å±æ€§å˜åŒ–
})
class A11ySystem extends System {
  static systemName = &#x27;A11ySystem&#x27;;
  private elemMap = new Map()
  update () {
    const changes: ComponentChanged[] = this.componentObserver.clear() // è·å–å½“å‰å¸§æ‰€æœ‰éœ€è¦ç›‘å¬çš„ç»„ä»¶å¤§å˜åŒ–ï¼Œå¹¶ä¸”è¿›è¡Œæ¸…ç†
    for (const changed of changes) {
        switch (changed.type) {
          case OBSERVER_TYPE.ADD:
            this.add(changed);
            break;
          case OBSERVER_TYPE.CHANGE:
            this.change(changed)
            break;
          case OBSERVER_TYPE.REMOVE:
            this.remove(changed);
            break;
        }
      }
  }
  add(changed) {
    if (changed.componentName === &#x27;A11y&#x27;) { // å¦‚æœæœ‰å¤šä¸ªComponentçš„è¯éœ€è¦åˆ†å¼€å¤„ç†
      const component = changed.component as A11y
      const elem = document.createElement(&#x27;div&#x27;)
      elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      this.elemMap.set(component, elem)
      document.body.append(elem) // æ·»åŠ åˆ°bodyä¸Š
    }
  }
  remove(changed) {
    if (changed.componentName === &#x27;A11y&#x27;) { // å¦‚æœæœ‰å¤šä¸ªComponentçš„è¯éœ€è¦åˆ†å¼€å¤„ç†
      const component = changed.component as A11y
      const elem = this.elemMap.get(component)
      elem.remove() // ç§»é™¤elem
    }
  }
  change(changed) {
    if (changed.componentName === &#x27;A11y&#x27;) { // å¦‚æœæœ‰å¤šä¸ªComponentçš„è¯éœ€è¦åˆ†å¼€å¤„ç†
      if (changed.prop?.prop[0] === &#x27;hint&#x27;){ //å¦‚æœæœ‰å¤šä¸ªç›‘å¬å±æ€§éœ€è¦åˆ†å¼€å¤„ç†
        const component = changed.component as A11y
        elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      }
    }
  }
}
</code></pre><p>ComponentChanged å¯¹åº”çš„ç±»å‹æ˜¯è¿™æ ·çš„ï¼Œå¯ä»¥å‚è€ƒï¼Œä¸éœ€è¦åœ¨ä»£ç é‡Œå®ç°</p><pre><code class="language-js">export interface PureObserverProp {
  deep: boolean;
  prop: string[];
}

export enum ObserverType {
  ADD = &#x27;ADD&#x27;,
  REMOVE = &#x27;REMOVE&#x27;,
  CHANGE = &#x27;CHANGE&#x27;,
}

export interface ComponentChanged {
  type: ObserverType;
  component: Component;
  componentName: string;
  prop?: PureObserverProp;
  gameObject?: GameObject;
  systemName?: string;
}

</code></pre><p>ç°åœ¨æˆ‘ä»¬æŠŠDOMåˆ›å»ºå¥½ï¼Œå¹¶ä¸”æ”¾åˆ°äº† body ä¸Šé¢ï¼ŒæŒ‰ç…§èƒ½åŠ›æ¥è®²ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å…·ä½“çš„åŠŸèƒ½ï¼Œå› ä¸ºå±å¹•é˜…è¯»å™¨å·²ç»å¯ä»¥é˜…è¯»æ¸¸æˆä¸­çš„å…ƒç´ äº†ï¼Œä½†æ˜¯çœ‹èµ·æ¥ç›®å‰æ¬ ç¼ºä¸€äº›å†…å®¹ï¼Œä¾‹å¦‚ï¼šæ— æ³•é€šè¿‡è§¦å‘ DOM ç‚¹å‡»äº‹ä»¶æ¥è§¦å‘æ¸¸æˆé‡Œé¢çš„ç‚¹å‡»ï¼ŒDOM çš„æ²¡æœ‰å®½é«˜å’Œå®šä½ã€‚</p><p>å¦‚æœæƒ³å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±è¦å»åœ¨å½“å‰ç»„ä»¶ä¸‹æ‹¿åˆ°åˆ«çš„ç»„ä»¶å»å®ç°åŠŸèƒ½äº†ï¼Œå¦‚æœæƒ³è§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œéœ€è¦åˆ¤æ–­ <a href="interactionEvent">Event ç»„ä»¶</a>æ˜¯å¦å®‰è£…ï¼Œå¦‚æœå®‰è£…çš„è¯ï¼Œå¯ä»¥æ ¹æ® Event ä¸Šç»‘å®šçš„äº‹ä»¶ï¼Œè§¦å‘å¯¹åº”çš„äº‹ä»¶ã€‚å¦‚æœæƒ³è·å–å®½é«˜ä½ç½®çš„è¯ï¼Œå¯ä»¥è·å–æ¸¸æˆå¯¹è±¡çš„ <a href="transformComponent">Transform ç»„ä»¶</a></p><p>å¢åŠ  Event ç»„ä»¶çš„ç›‘å¬ï¼Œåœ¨ä¸Šè¿° add remove ç­‰æ–¹æ³•é‡Œåšå¯¹åº”æ“ä½œå³å¯ã€‚</p><pre><code class="language-js">@decorators.componentObserver({
  A11y: [&#x27;hint&#x27;] // ç›‘å¬ A11y ç»„ä»¶çš„ hint å±æ€§å˜åŒ–
  Event: [] // Event å¢åŠ åˆ é™¤ç›‘å¬
})
class A11ySystem extends System {
}
</code></pre><p>å¯¹äºä½ç½®å’Œå®½é«˜ï¼Œå¯ä»¥åœ¨ A11y ç»„ä»¶è¢«æ·»åŠ æ—¶æ‹¿åˆ°å¯¹åº” GameObject çš„ Transformï¼Œè¿™é‡Œä»…ä¸¾ä¸ªä¾‹å­</p><pre><code class="language-js">add(changed) {
   if (changed.componentName === &#x27;A11y&#x27;) { // å¦‚æœæœ‰å¤šä¸ªComponentçš„è¯éœ€è¦åˆ†å¼€å¤„ç†
      const component = changed.component as A11y
      const elem = document.createElement(&#x27;div&#x27;)
      elem.setAttribute(&#x27;aria-label&#x27;, component.hint);
      this.elemMap.set(component, elem)
      document.body.append(elem) // æ·»åŠ åˆ°bodyä¸Š


      const transform = changed.gameObject.transform
      elem.style.width = transform.size.width + &#x27;px&#x27;
      elem.style.height = transform.size.width + &#x27;px&#x27;
      elem.style.x = transform.position.x + &#x27;px&#x27;
      elem.style.y = transform.position.y + &#x27;px&#x27;
    }
}
</code></pre><h2 id="åŸºäº-pixijs-çš„æ’ä»¶">åŸºäº PixiJS çš„æ’ä»¶</h2><p>ä»¥å›¾ç‰‡ç»„ä»¶ä¸¾ä¾‹ï¼š</p><pre><code class="language-js">  import {
    GameObject,
    decorators,
    resource,
    ComponentChanged,
    RESOURCE_TYPE,
    OBSERVER_TYPE,
  } from &#x27;@eva/eva.js&#x27;;
  import {
    RendererManager,
    ContainerManager,
    RendererSystem,
    Renderer,
  } from &#x27;@eva/plugin-renderer&#x27;;

  @decorators.componentObserver({
    Img: [{prop: [&#x27;resource&#x27;], deep: false}],
  })
  export default class Img extends Renderer { // åŸºäº PixiJS æ¸²æŸ“çš„æ’ä»¶ï¼Œæˆ‘ä»¬çš„ System éœ€è¦ç»§æ‰¿äºç»Ÿä¸€çš„ä¸€ä¸ª Renderer ç±»
  rendererSystem: RendererSystem;
  init() { // åœ¨initä¸­å»è·å– rendererSystem ä»¥ä¾¿åç»­æ·»åŠ  Pixi å¯¹è±¡ï¼Œå¹¶ä¸”éœ€è¦å°†å½“å‰ç³»ç»Ÿæ³¨å†Œåˆ°rendererManagerä¸­ã€‚
    this.rendererSystem = this.game.getSystem(RendererSystem) as RendererSystem;
    this.rendererSystem.rendererManager.register(this);
  }
  rendererUpdate(gameObject: GameObject) { // rendererUpdate ä»£æ›¿ Update æ–¹æ³•ï¼Œå› ä¸ºupdateåœ¨ Renderer ç±»ä¸­å·²ç»å®ç°
    const {width, height} = gameObject.transform.size;
    if (this.imgs[gameObject.id]) {
      this.imgs[gameObject.id].sprite.width = width;
      this.imgs[gameObject.id].sprite.height = height;
    }
  }

  async componentChanged(changed: ComponentChanged) { // åœ¨ Renderer ç±»ä¸­å®ç°äº† update æ–¹æ³•ï¼Œå¹¶ä¸”å°† Img å¯¹åº”çš„ç»„ä»¶å˜åŒ–ä¼ é€’ç»™ componentChanged
  if (changed.componentName === &#x27;Img&#x27;) {
      const component: ImgComponent = changed.component as ImgComponent;
      if (changed.type === OBSERVER_TYPE.ADD) {
        const sprite = new Sprite(null);
        resource.getResource(component.resource).then(({instance}) =&gt; {
          if (!instance) {
            console.error(
              `GameObject:${changed.gameObject.name}&#x27;s Img resource load error`,
            );
          }
          sprite.image = instance;
        });
        this.imgs[changed.gameObject.id] = sprite;
        this.containerManager
          .getContainer(changed.gameObject.id)
          .addChildAt(sprite.sprite, 0); // å°†åˆ›å»ºçš„ Pixi æ¸²æŸ“å¯¹è±¡æ”¾è¿› GameObject å¯¹åº”çš„ Pixi å®¹å™¨ä¸­
      } else if (changed.type === OBSERVER_TYPE.CHANGE) {
        const {instance} = await resource.getResource(component.resource);
        if (!instance) {
          console.error(
            `GameObject:${changed.gameObject.name}&#x27;s Img resource load error`,
          );
        }
        this.imgs[changed.gameObject.id].image = instance;
      } else if (changed.type === OBSERVER_TYPE.REMOVE) {
        const sprite = this.imgs[changed.gameObject.id];
        this.containerManager
          .getContainer(changed.gameObject.id)
          .removeChild(sprite.sprite);
        delete this.imgs[changed.gameObject.id];
      }
    }
  }

</code></pre><h2 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="https://img.alicdn.com/imgextra/i2/O1CN01gEgYOz1T8qevGDloU_!!6000000002338-2-tps-1448-906.png" alt="image.png"></p><h2 id="æ€»ç»“">æ€»ç»“</h2><p>é€šè¿‡ Component å’Œ System çš„ç»“åˆï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å„ç§å„æ ·çš„é€šç”¨æ’ä»¶ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä»…éœ€è¦ <a href="customComponent">CustomComponent</a> æä¾›çš„èƒ½åŠ›å¼€å‘æ¸¸æˆé€»è¾‘å³å¯ã€‚</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/pluginDevelop.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ç¼–è¾‘å½“å‰æ–‡æ¡£</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh-cn/docs/tutorials/performancePlugin"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Â« <!-- -->æ€§èƒ½ç›‘æ§</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åŸºç¡€" class="table-of-contents__link toc-highlight">åŸºç¡€</a><ul><li><a href="#å¼€å‘" class="table-of-contents__link toc-highlight">å¼€å‘</a></li><li><a href="#æ’ä»¶è¿è¡Œé€»è¾‘" class="table-of-contents__link toc-highlight">æ’ä»¶è¿è¡Œé€»è¾‘</a></li><li><a href="#æ„å»ºä¸å‘å¸ƒè§„èŒƒ" class="table-of-contents__link toc-highlight">æ„å»ºä¸å‘å¸ƒè§„èŒƒ</a></li></ul></li><li><a href="#å¼€å‘å®è·µ" class="table-of-contents__link toc-highlight">å¼€å‘å®è·µ</a><ul><li><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="table-of-contents__link toc-highlight">ä½¿ç”¨æ¡ˆä¾‹</a></li><li><a href="#component-è®¾è®¡" class="table-of-contents__link toc-highlight">Component è®¾è®¡</a></li><li><a href="#system-è®¾è®¡" class="table-of-contents__link toc-highlight">System è®¾è®¡</a></li></ul></li><li><a href="#åŸºäº-pixijs-çš„æ’ä»¶" class="table-of-contents__link toc-highlight">åŸºäº PixiJS çš„æ’ä»¶</a></li><li><a href="#ç”Ÿå‘½å‘¨æœŸ" class="table-of-contents__link toc-highlight">ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#æ€»ç»“" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Eva.js 2019 - NOW &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MIT License</div></div></div></footer></div>
<script src="/zh-cn/assets/js/runtime~main.ae83285c.js"></script>
<script src="/zh-cn/assets/js/main.2e9ad81b.js"></script>
</body>
</html>